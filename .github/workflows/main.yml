name: Simple Video Generator

on:
  workflow_dispatch:
    inputs:
      text:
        description: 'Text to animate'
        required: true
        default: 'Hello World!'

jobs:
  generate-video:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install deps
      run: pip install pillow imageio

    - name: Generate video
      env:
        TEXT: ${{ github.event.inputs.text }}
      run: |
        mkdir -p outputs
        
        cat > simple_video.py << 'EOF'
from PIL import Image, ImageDraw
import imageio
import os

text = os.getenv('TEXT', 'Hello!')
frames = []

for i in range(30):
    img = Image.new('RGB', (400, 200), color='blue')
    draw = ImageDraw.Draw(img)
    
    # Moving text
    x = 50 + (i * 3) % 200
    draw.text((x, 80), text, fill='white')
    draw.text((50, 30), f"Frame {i+1}/30", fill='yellow')
    
    frames.append(img)

# Save as GIF
imageio.mimsave('outputs/animation.gif', frames, duration=0.1)
print("âœ… Video created: outputs/animation.gif")
EOF

        python simple_video.py

    - name: Upload
      uses: actions/upload-artifact@v4
      with:
        name: my-video
        path: outputs/
