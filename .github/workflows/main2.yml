name: Basic Image Generator

on:
  workflow_dispatch:
    inputs:
      prompt:
        description: 'Image prompt'
        required: true
        default: 'A sunset'

jobs:
  generate:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Create image
      env:
        PROMPT: ${{ github.event.inputs.prompt }}
      run: |
        pip install pillow
        python -c "
        from PIL import Image, ImageDraw, ImageFont
        import datetime
        
        # Create image
        img = Image.new('RGB', (400, 300), color='navy')
        draw = ImageDraw.Draw(img)
        
        # Add text
        draw.text((50, 50), 'AI Image Generator', fill='white')
        draw.text((50, 100), f'Prompt: {\\\"$PROMPT\\\"}', fill='yellow')
        draw.text((50, 150), 'GitHub Actions', fill='lightblue')
        draw.text((50, 200), f'Time: {datetime.datetime.now()}', fill='white')
        
        # Save
        img.save('generated_image.png')
        print('âœ… Image created: generated_image.png')
        "

    - name: Upload image
      uses: actions/upload-artifact@v4
      with:
        name: generated-image
        path: generated_image.png
        retention-days: 30
