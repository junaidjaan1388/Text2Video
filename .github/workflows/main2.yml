name: Simple Text-to-Image

on:
  workflow_dispatch:
    inputs:
      prompt:
        description: 'Image prompt'
        required: true
        default: 'A beautiful sunset'

jobs:
  generate:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Install dependencies
      run: pip install pillow

    - name: Create simple image
      env:
        PROMPT: ${{ github.event.inputs.prompt }}
      run: |
        mkdir -p outputs
        python -c "
from PIL import Image, ImageDraw, ImageFont
import datetime
import os

prompt = os.getenv('PROMPT', 'A beautiful image')

# Create image
img = Image.new('RGB', (512, 512), color='navy')
draw = ImageDraw.Draw(img)

# Add text
draw.text((50, 50), 'AI Image Generator', fill='white')
draw.text((50, 100), f'Prompt: {prompt}', fill='yellow')
draw.text((50, 150), 'GitHub Actions', fill='lightblue')
draw.text((50, 200), f'Time: {datetime.datetime.now()}', fill='white')

# Draw some shapes
draw.rectangle([50, 250, 462, 350], outline='white', width=2)
draw.ellipse([200, 260, 312, 340], fill='orange')

# Save
img.save('outputs/generated_image.png')
print('âœ… Image created: outputs/generated_image.png')
"

    - name: Upload image
      uses: actions/upload-artifact@v4
      with:
        name: generated-image
        path: outputs/
        retention-days: 30
