name: ModelScope Video Generation

on:
  workflow_dispatch:
    inputs:
      prompt:
        description: 'Text prompt for video'
        required: true

jobs:
  generate:
    runs-on: ubuntu-latest-16core
    steps:
    - name: Generate with ModelScope
      run: |
        pip install modelscope torch
        python -c "
from modelscope.pipelines import pipeline
from modelscope.utils.constant import Tasks

pipe = pipeline(Tasks.text_to_video_synthesis, 'damo/text-to-video-synthesis')
result = pipe({'text': '${{ github.event.inputs.prompt }}'})
print('Video generated:', result)
"
